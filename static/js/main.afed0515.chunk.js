/*! For license information please see main.afed0515.chunk.js.LICENSE.txt */
(this["webpackJsonphuman-intelligent-reading"]=this["webpackJsonphuman-intelligent-reading"]||[]).push([[0],{184:function(e,t,n){},185:function(e,t,n){},186:function(e,t,n){},187:function(e,t,n){},188:function(e,t,n){},189:function(e,t,n){},190:function(e,t,n){},191:function(e,t,n){},192:function(e,t,n){},193:function(e,t,n){},194:function(e,t,n){},195:function(e,t,n){"use strict";n.r(t);var r,a=n(0),c=n.n(a),i=n(16),o=n.n(i),s=n(23),l=n(55),u=n(12),d=n(116),j=(n(154),n(155),n(156),"FETCH_LAYOUT"),b="UPDATE_LAYOUT",f="TEMPORARY_SET_LAYOUT",O="FETCH_SCENARIOS",h="ADD_SCENARIO",m="DELETE_SCENARIO",p="UPDATE_SCENARIO",x=n(6),g="SHOW_NOTIFICATION",v="HIDE_NOTIFICATION",y={isOpened:!1,severity:"success",message:null},k="FETCH_THESAURUS",w="ADD_TERM",N="DELETE_TERM",C="UPDATE_TERM",I="TOGGLE_ADD_BLOCK_DIALOG",S={addBlockDialog:{show:!1,order:null,direction:null}},T=Object(l.c)({layout:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case j:case b:case f:return t.payload;default:return e}},scenarios:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case O:case h:case m:case p:return t.payload;default:return e}},notification:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g:return Object(x.a)(Object(x.a)({},t.payload),{},{isOpened:!0});case v:return y;default:return e}},thesaurus:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case k:case w:case N:case C:return t.payload;default:return e}},blockEditor:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case I:return Object(x.a)(Object(x.a)({},e),{},{addBlockDialog:t.payload});default:return e}}}),E=n(9),R=n(18),A=n(285),z=n(284),W=.61803,M=1.61803,H="view",P="edit",B="example",F={INFO:"<info>",WARNING:"<warning>",ERROR:"<error>"},D="word",L="term",U="text",_="image",G="text-image-horizontal",J="text-image-vertical",Y=":scenarioId",q=":blockId",K=":monitoringRecordId",Z="".concat("/","scenarios"),V="".concat(Z,"/").concat(Y),X="".concat("/","admin"),Q="".concat(X,"/layout-editor"),$="".concat(X,"/scenarios/:scenarioId"),ee=function(e){return $.replace(Y,e)},te="".concat($,"/block-editor/").concat(q),ne=function(e,t){return te.replace(Y,e).replace(q,t)},re="".concat(X,"/thesaurus"),ae="".concat(X,"/monitoring/").concat(K),ce=n(15),ie=n(56),oe=n(49),se=window.localStorage,le={LAYOUT:"LAYOUT",BLOCKS:"BLOCKS",SCENARIOS:"SCENARIOS",THESAURUS:"THESAURUS",MONITORING:"MONITORING"},ue=(r={},Object(ie.a)(r,le.LAYOUT,{maxWidth:1280,fontSize:14,lineHeight:24,grid:{columnsNumber:12,columnGutter:24},focusLine:10,fontFamily:"'Inter', sans-serif"}),Object(ie.a)(r,le.BLOCKS,[]),Object(ie.a)(r,le.SCENARIOS,[]),Object(ie.a)(r,le.THESAURUS,[]),Object(ie.a)(r,le.MONITORING,[]),r),de=function(e){var t=se.getItem(e);return t&&""!==t?JSON.parse(t):null},je=function(e,t){se.setItem(e,JSON.stringify(t))};Object.values(le).forEach((function(e){de(e)||je(e,ue[e])}));var be=function(){return de(le.LAYOUT)},fe=function(){return de(le.BLOCKS)},Oe=function(e){return fe().filter((function(t){return e.blocks.includes(t.id)}))},he=function(e){var t=fe();je(le.BLOCKS,t.filter((function(t){return t.id!==e})))},me=function(){return de(le.SCENARIOS)},pe=function(e){return me().find((function(t){return t.id===e}))},xe=function(e){return je(le.SCENARIOS,e),e},ge=function(e){var t=me(),n={id:Object(oe.a)(),title:e,blocks:[]};return xe([].concat(Object(ce.a)(t),[n]))},ve=function(e){var t=me();return pe(e).blocks.forEach((function(e){he(e)})),xe(t.filter((function(t){return t.id!==e})))},ye=function(e){var t=me(),n=pe(e.id);return n.blocks.forEach((function(t){var n=e.blocks.find((function(e){return e.id===t}));n?function(e){var t=fe();je(le.BLOCKS,t.map((function(t){return t.id!==e.id?t:e})))}(n):he(t)})),e.blocks.forEach((function(e){!n.blocks.find((function(t){return t===e.id}))&&function(e){var t=fe();je(le.BLOCKS,[].concat(Object(ce.a)(t),[e]))}(e)})),xe(t.map((function(t){return t.id!==e.id?t:Object(x.a)(Object(x.a)({},e),{},{blocks:e.blocks.map((function(e){return e.id}))})})))},ke=function(){return de(le.THESAURUS)},we=function(e){return je(le.THESAURUS,e),e},Ne=function(e){var t=ke(),n=Object(x.a)(Object(x.a)({},e),{},{id:Object(oe.a)()});return we([].concat(Object(ce.a)(t),[n]))},Ce=function(e){var t=ke();return we(t.map((function(t){return t.id!==e.id?t:e})))},Ie=function(e){var t=ke();return we(t.filter((function(t){return t.id!==e})))},Se=function(e){return je(le.MONITORING,e),e},Te=function(e,t){return function(n){n({type:g,payload:{severity:e,message:t}})}},Ee=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function(t,n){n().layout&&!e||t({type:j,payload:be()})}},Re=function(e){return function(t,n){var r=n().layout;JSON.stringify(r)!==JSON.stringify(e)&&t({type:b,payload:e})}},Ae=function(){return function(e,t){!function(e){je(le.LAYOUT,e)}(t().layout),e(Te("success","\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b \u043f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u044b"))}},ze=function(e){return function(t,n){var r=n().scenarios.find((function(t){return t.id===e}));if(r)return Object(x.a)(Object(x.a)({},r),{},{blocks:Oe(r)})}},We=function(e){var t={};return""===e.term&&(t.term="\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0442\u0435\u0440\u043c\u0438\u043d"),""===e.definition&&(t.definition="\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0438\u0435 \u0442\u0435\u0440\u043c\u0438\u043d\u0430"),0!==Object.keys(t).length?t:null},Me=function(e){return function(t,n){return n().thesaurus.find((function(t){return t.id===e}))}},He=n(292),Pe=n(197),Be=n(291),Fe=n(1),De=function(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e.notification})),n=function(t,n){"clickaway"!==n&&e((function(e){e({type:v})}))},r=t.isOpened,a=t.message,c=t.severity;return r?Object(Fe.jsx)(He.a,{open:r,autoHideDuration:3e3,anchorOrigin:{vertical:"top",horizontal:"right"},TransitionComponent:function(e){return Object(Fe.jsx)(Pe.a,Object(x.a)(Object(x.a)({},e),{},{direction:"left"}))},onClose:n,style:{top:"64px"},children:Object(Fe.jsx)(Be.a,{severity:c,elevation:6,onClose:n,style:{width:"100%"},children:a})}):null},Le=n(241),Ue=n(242),_e=n(46),Ge=n(243),Je=n(235),Ye=n(244),qe=n(129),Ke=n(238),Ze=n(239),Ve=n(240),Xe=n(236),Qe=Object(Xe.a)((function(e){return{listItemIcon:{minWidth:"auto",marginRight:e.spacing(2)}}})),$e=function(e){var t=e.anchorEl,n=e.children,r=e.onClose,a=Object(R.g)(),c=Qe(),i=!!t;return Object(Fe.jsx)(qe.a,{anchorEl:t,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:i,onClose:r,children:n.map((function(e,t){return[].concat(Object(ce.a)(e.map((function(e){if(!1===e.visible)return null;return Object(Fe.jsxs)(Ve.a,{dense:!0,onClick:function(){r(),e.onClick?e.onClick():e.to&&a.push(e.to)},children:[e.icon?Object(Fe.jsx)(Ze.a,{className:c.listItemIcon,children:e.icon}):null,e.title]},e.title)}))),[t===n.length-1?null:Object(Fe.jsx)(Ke.a,{})])}))})},et=Object(Xe.a)((function(e){return{toolbar:{padding:e.spacing(0,4)},grow:{flexGrow:1},button:{marginLeft:e.spacing(4),padding:e.spacing(1),color:"#fff",background:"rgba(255, 255, 255, 0.2)",lineHeight:1}}})),tt=function(){var e=et(),t=Object(a.useState)(null),n=Object(E.a)(t,2),r=n[0],c=n[1],i=[[{title:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"},{title:"\u0410\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435",to:X}]];return Object(Fe.jsxs)(Fe.Fragment,{children:[Object(Fe.jsx)(Le.a,{position:"static",elevation:0,children:Object(Fe.jsxs)(Ue.a,{className:e.toolbar,variant:"dense",children:[Object(Fe.jsx)(_e.a,{variant:"body1",noWrap:!0,children:"Human Intelligent Reading"}),Object(Fe.jsx)(Ge.a,{className:e.button,size:"small",variant:"text",component:s.b,to:"/scenarios",children:"\u0421\u0446\u0435\u043d\u0430\u0440\u0438\u0438"}),Object(Fe.jsx)("div",{className:e.grow}),Object(Fe.jsx)(Je.a,{edge:"end",color:"inherit",onClick:function(e){c(e.currentTarget)},children:Object(Fe.jsx)(Ye.a,{})})]})}),Object(Fe.jsx)($e,{anchorEl:r,onClose:function(){c(null)},children:i})]})},nt=n(251),rt=n(237),at=n(199),ct=n(252),it=n(253),ot=n(293),st=n(247),lt=n(248),ut=n(249),dt=n(250),jt=n(254),bt=n(258),ft=n(259),Ot=n(260),ht=n(261),mt=n(262),pt=n(286),xt=n(288),gt=n(121),vt=n(246),yt=n(245),kt=Object(Xe.a)((function(e){return{drawer:{width:"400px",zIndex:9},drawerPaper:{position:"static"},drawerHeader:{display:"flex",alignItems:"center","& > *:first-child":{width:"100%",marginRight:e.spacing(1),fontWeight:"normal"},"& > *:last-child":{marginRight:e.spacing(-1)}},drawerHeaderAdditional:{marginTop:e.spacing(1)},drawerItem:{padding:e.spacing(2,4)},drawerItemTitle:{fontWeight:"normal",marginBottom:e.spacing(2)},drawerItemParam:{marginBottom:e.spacing(2),"&:last-child":{marginBottom:e.spacing(1)}},slider:{"& .MuiSlider-markLabel":{display:"flex",width:0,justifyContent:"center",transform:"none"}},sliderMarkLeft:{width:0},sliderMarkRight:{transform:"translateX(-47%)"},drawerItemParamSwitch:{display:"flex",alignItems:"center","& > *:first-child":{width:"100%"},"& > *:last-child":{marginRight:e.spacing(-1)}},listItemWithButton:{display:"flex",alignItems:"center","& > p":{width:"100%"}},nestedListItem:{padding:e.spacing(1,4,1,6)},info:{marginBottom:e.spacing(2)},listItem:{padding:e.spacing(1,4)}}})),wt=function(e){var t=e.header,n=e.children,r=kt();return Object(Fe.jsxs)(vt.a,{className:r.drawer,variant:"permanent",classes:{paper:r.drawerPaper},anchor:"left",children:[function(){if(!t)return null;return Object(Fe.jsxs)(Fe.Fragment,{children:[Object(Fe.jsxs)("div",{className:r.drawerItem,children:[Object(Fe.jsxs)("div",{className:r.drawerHeader,children:[Object(Fe.jsx)(_e.a,{variant:"h6",children:t.title}),Object(Fe.jsx)(Je.a,{size:"small",component:s.b,to:t.backRoute,children:Object(Fe.jsx)(yt.a,{})})]}),function(){if(!t.saveButton)return null;return Object(Fe.jsx)("div",{className:r.drawerHeaderAdditional,children:t.saveButton.onSave?Object(Fe.jsx)(Ge.a,{variant:"outlined",color:"primary",size:"small",disabled:t.saveButton.disabled,onClick:t.saveButton.onSave,children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"}):Object(Fe.jsx)(Be.a,{severity:"info",children:t.saveButton.message})})}()]}),Object(Fe.jsx)(Ke.a,{})]})}(),n]})},Nt=function(e){var t=e.isOpened,n=e.title,r=e.children,a=e.onClose,c=e.onAdd;return Object(Fe.jsxs)(st.a,{open:t,fullWidth:!0,onClose:a,children:[Object(Fe.jsx)(lt.a,{children:n}),Object(Fe.jsx)(ut.a,{children:r}),Object(Fe.jsxs)(dt.a,{children:[Object(Fe.jsx)(Ge.a,{color:"primary",onClick:function(){c()&&a()},children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"}),Object(Fe.jsx)(Ge.a,{color:"default",onClick:a,children:"\u041e\u0442\u043c\u0435\u043d\u0430"})]})]})},Ct={isOpened:!1,title:"",errors:{}},It={isOpened:!1,file:null},St=function(){var e=Object(u.b)(),t=kt(),n=Object(u.c)((function(e){return e.scenarios})),r=Object(a.useState)(Ct),c=Object(E.a)(r,2),i=c[0],o=c[1],l=Object(a.useState)(It),d=Object(E.a)(l,2),j=d[0],b=d[1],f=Object(a.useState)(!1),O=Object(E.a)(f,2),p=O[0],g=O[1],v=Object(a.useState)(null),y=Object(E.a)(v,2),k=y[0],w=y[1];Object(a.useEffect)((function(){k||w(de(le.MONITORING).map((function(e){return{id:e.id,date:e.date}})))}),[k]);return Object(Fe.jsx)(wt,{children:Object(Fe.jsxs)(rt.a,{disablePadding:!0,children:[Object(Fe.jsx)(at.a,{className:t.listItem,button:!0,component:s.b,to:Q,children:Object(Fe.jsx)(ct.a,{primary:"\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b \u043f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u044f",secondary:"\u041e\u0431\u0449\u0438\u0435 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u043f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u043a\u043e\u043d\u0442\u0435\u043d\u0442\u0430"})}),Object(Fe.jsx)(Ke.a,{}),Object(Fe.jsx)(at.a,{className:t.listItem,button:!0,component:s.b,to:re,children:Object(Fe.jsx)(ct.a,{primary:"\u0422\u0435\u0437\u0430\u0443\u0440\u0443\u0441",secondary:"\u0421\u043b\u043e\u0432\u0430\u0440\u044c \u043f\u0440\u0435\u0434\u043c\u0435\u0442\u043d\u043e\u0439 \u043e\u0431\u043b\u0430\u0441\u0442\u0438"})}),Object(Fe.jsx)(Ke.a,{}),function(){var e=function(){b(It)};return Object(Fe.jsxs)(Fe.Fragment,{children:[Object(Fe.jsxs)(st.a,{open:j.isOpened,fullWidth:!0,onClose:e,children:[Object(Fe.jsx)(lt.a,{children:"\u0418\u043c\u043f\u043e\u0440\u0442 / \u042d\u043a\u0441\u043f\u043e\u0440\u0442 \u0445\u0440\u0430\u043d\u0438\u043b\u0438\u0449\u0430"}),Object(Fe.jsxs)(ut.a,{children:[Object(Fe.jsx)(Ge.a,{variant:"contained",color:"primary",disableElevation:!0,startIcon:Object(Fe.jsx)(ft.a,{}),onClick:function(){var e=new Blob([JSON.stringify(Object.values(le).reduce((function(e,t){return e[t]=de(t),e}),{}))],{type:"application/json;charset=utf-8"}),t="hir-storage-".concat(Date.now(),".json");Object(gt.saveAs)(e,t)},children:"\u0421\u043a\u0430\u0447\u0430\u0442\u044c \u0444\u0430\u0439\u043b \u0445\u0440\u0430\u043d\u0438\u043b\u0438\u0449\u0430"}),Object(Fe.jsx)("br",{}),Object(Fe.jsx)("br",{}),Object(Fe.jsx)("input",{id:"upload-storage",type:"file",accept:"application/json",hidden:!0,onChange:function(e){b(Object(x.a)(Object(x.a)({},j),{},{file:e.target.files[0]}))}}),Object(Fe.jsx)("label",{htmlFor:"upload-storage",children:Object(Fe.jsx)(Ge.a,{variant:"contained",color:"primary",disableElevation:!0,component:"span",startIcon:Object(Fe.jsx)(Ot.a,{}),children:"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0444\u0430\u0439\u043b \u0445\u0440\u0430\u043d\u0438\u043b\u0438\u0449\u0430"})}),Object(Fe.jsx)("br",{}),Object(Fe.jsx)("br",{}),Object(Fe.jsx)(Be.a,{severity:"error",children:"\u041f\u043e\u0441\u043b\u0435 \u0438\u043c\u043f\u043e\u0440\u0442\u0430 \u0445\u0440\u0430\u043d\u0438\u043b\u0438\u0449\u0430 \u043f\u0435\u0440\u0435\u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u0435 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443."})]}),Object(Fe.jsxs)(dt.a,{children:[Object(Fe.jsx)(Ge.a,{color:"primary",disabled:!j.file,onClick:function(){var t=new FileReader;t.onload=function(t){var n;e(),n=t.target.result,Object.entries(JSON.parse(n)).forEach((function(e){var t=Object(E.a)(e,2),n=t[0],r=t[1];je(n,r)}))},t.readAsText(j.file)},children:"\u0418\u043c\u043f\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"}),Object(Fe.jsx)(Ge.a,{color:"default",onClick:e,children:"\u041e\u0442\u043c\u0435\u043d\u0430"})]})]}),Object(Fe.jsx)(at.a,{className:t.listItem,button:!0,onClick:function(){b({isOpened:!0})},children:Object(Fe.jsx)(ct.a,{primary:"\u0425\u0440\u0430\u043d\u0438\u043b\u0438\u0449\u0435",secondary:"\u0418\u043c\u043f\u043e\u0440\u0442 / \u042d\u043a\u0441\u043f\u043e\u0440\u0442"})}),Object(Fe.jsx)(Ke.a,{})]})}(),Object(Fe.jsxs)(Fe.Fragment,{children:[Object(Fe.jsx)(Nt,{isOpened:i.isOpened,title:"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0441\u0446\u0435\u043d\u0430\u0440\u0438\u044f",onAdd:function(){var t,n=e((t=i.title,function(e){if(""===t)return{errors:{title:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"}};e({type:h,payload:ge(t)}),e(Te("success",'\u0421\u0446\u0435\u043d\u0430\u0440\u0438\u0439 "'.concat(t,'" \u0441\u043e\u0437\u0434\u0430\u043d')))}));return!(null===n||void 0===n?void 0:n.errors)||(o(Object(x.a)(Object(x.a)({},i),{},{errors:n.errors})),!1)},onClose:function(){o(Ct)},children:Object(Fe.jsx)(ot.a,{error:!!i.errors.title,helperText:i.errors.title,variant:"outlined",label:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0441\u0446\u0435\u043d\u0430\u0440\u0438\u044f",value:i.title,autoFocus:!0,fullWidth:!0,margin:"normal",required:!0,onChange:function(e){o(Object(x.a)(Object(x.a)({},i),{},{title:e.target.value,errors:{}}))}})}),Object(Fe.jsxs)(at.a,{className:t.listItem,children:[Object(Fe.jsx)(ct.a,{primary:"\u0421\u0446\u0435\u043d\u0430\u0440\u0438\u0438"}),Object(Fe.jsx)(it.a,{title:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0441\u0446\u0435\u043d\u0430\u0440\u0438\u0439",placement:"right",children:Object(Fe.jsx)(Je.a,{size:"small",color:"primary",onClick:function(){o(Object(x.a)(Object(x.a)({},i),{},{isOpened:!0}))},children:Object(Fe.jsx)(bt.a,{})})})]}),n?Object(Fe.jsx)(nt.a,{in:!0,timeout:"auto",unmountOnExit:!0,children:Object(Fe.jsx)(rt.a,{component:"div",disablePadding:!0,children:n.map((function(n){return Object(Fe.jsxs)(at.a,{className:t.nestedListItem,button:!0,component:s.b,to:ee(n.id),children:[Object(Fe.jsx)(ct.a,{primary:n.title}),Object(Fe.jsx)(it.a,{title:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0441\u0446\u0435\u043d\u0430\u0440\u0438\u0439",placement:"right",children:Object(Fe.jsx)(Je.a,{size:"small",color:"secondary",onClick:function(t){var r;t.preventDefault(),e((r=n.id,function(e){e({type:m,payload:ve(r)}),e(Te("warning","\u0421\u0446\u0435\u043d\u0430\u0440\u0438\u0439 ".concat(r," \u0443\u0434\u0430\u043b\u0435\u043d")))}))},children:Object(Fe.jsx)(jt.a,{})})})]},n.id)}))})}):null,Object(Fe.jsx)(Ke.a,{})]}),function(){var n=function(){g(!p)};return Object(Fe.jsxs)(Fe.Fragment,{children:[Object(Fe.jsxs)(at.a,{className:t.listItem,disabled:!(null===k||void 0===k?void 0:k.length),children:[Object(Fe.jsx)(ct.a,{primary:"\u041c\u043e\u043d\u0438\u0442\u043e\u0440\u0438\u043d\u0433"}),(null===k||void 0===k?void 0:k.length)?Object(Fe.jsx)(Je.a,{size:"small",color:"primary",onClick:n,children:p?Object(Fe.jsx)(ht.a,{}):Object(Fe.jsx)(mt.a,{})}):null]}),(null===k||void 0===k?void 0:k.length)?Object(Fe.jsx)(nt.a,{in:p,timeout:"auto",unmountOnExit:!0,children:Object(Fe.jsx)(rt.a,{component:"div",disablePadding:!0,children:k.map((function(n){var r;return Object(Fe.jsxs)(at.a,{className:t.nestedListItem,button:!0,component:s.b,to:(r=n.id,ae.replace(K,r)),children:[Object(Fe.jsx)(ct.a,{primary:Object(pt.a)(new Date(n.date),"dd MMMM yyyy HH:mm",{locale:xt.a})}),Object(Fe.jsx)(it.a,{title:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0437\u0430\u043f\u0438\u0441\u044c",placement:"right",children:Object(Fe.jsx)(Je.a,{size:"small",color:"secondary",onClick:function(t){t.preventDefault(),w(function(e){var t=de(le.MONITORING);return Se(t.filter((function(t){return t.id!==e})))}(n.id)),e(Te("warning","\u0417\u0430\u043f\u0438\u0441\u044c \u043e \u043c\u043e\u043d\u0438\u0442\u043e\u0440\u0438\u043d\u0433\u0435 ".concat(n.id," \u0443\u0434\u0430\u043b\u0435\u043d\u0430")))},children:Object(Fe.jsx)(jt.a,{})})})]},n.id)}))})}):null,Object(Fe.jsx)(Ke.a,{})]})}()]})})},Tt=n(30),Et=n(73),Rt=n.n(Et),At=n(89),zt=n(124),Wt=n.n(zt),Mt="WORD",Ht="PUNCTUATION",Pt="TERM",Bt=function(e){var t=new URLSearchParams;return Object.entries(e).forEach((function(e){var n=Object(E.a)(e,2),r=n[0],a=n[1];t.append(r,a)})),t.toString()},Ft=function(){var e=Object(At.a)(Rt.a.mark((function e(t){var n,r,a;return Rt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",[]);case 2:return e.prev=2,n=Bt({key:"dict.1.1.20220428T193402Z.bbc72334b78ae239.c390768c1f31e22a9869ba21e343dc717395e419",lang:"ru-ru",text:t}),e.next=6,Wt.a.get("".concat("https://dictionary.yandex.net/api/v1","/dicservice.json/lookup?").concat(n),{withCredentials:!1});case 6:return r=e.sent,a=Object(ce.a)(new Set(r.data.def.reduce((function(e,t){return[].concat(Object(ce.a)(e),Object(ce.a)((t.tr||[]).reduce((function(e,t){return[].concat(Object(ce.a)(e),[t.text],Object(ce.a)((t.syn||[]).reduce((function(e,t){return[].concat(Object(ce.a)(e),[t.text])}),[])))}),[])))}),[]))),e.abrupt("return",a);case 11:return e.prev=11,e.t0=e.catch(2),console.error(e.t0),e.abrupt("return",[]);case 15:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t){return e.apply(this,arguments)}}(),Dt=function(e,t){var n=e.split(" "),r=t.split(" ");if(n.length!==r.length)return!1;var a=n.length;return Object(ce.a)(new Array(a)).map((function(e,t){for(var a=[n[t],r[t]].map((function(e){return e.toLowerCase()})).sort((function(e,t){return e.length-t.length})),c=0,i=0;i<a[0].length;i++)a[0][i]===a[1][i]&&c++;return c/a[1].length>=.7})).filter(Boolean).length===a},Lt=function(e,t,n){if("string"!==typeof e)return e;for(var r,a=Object(ce.a)(e.matchAll(/[\u0430-\u044f\u0451-]+/gi)).filter((function(e){return!"-".includes(e[0])})),c=[],i=function(e){c.push({type:Ht,value:e})},o=0;o<a.length;o++){var s,l=a[o].index,u=Object(E.a)(a[o],1)[0],d=u.length;0===o&&0!==l&&i(e.slice(0,l)),r=u,c.push({id:Object(oe.a)(),type:Mt,value:r});var j=null===(s=a[o+1])||void 0===s?void 0:s.index;i(e.slice(l+d,j))}t.reduce((function(e,t){return[].concat(Object(ce.a)(e),[{id:t.id,term:t.term}],Object(ce.a)(t.synonyms.map((function(e){return{id:t.id,term:e}}))))}),[]).sort((function(e,t){return t.term.split(" ").length-e.term.split(" ").length})).forEach((function(e){for(var n=e.term.split(" "),r=n.length+n.length-1,a=function(e){return Object(ce.a)(new Array(r)).map((function(e,t){return t%2===0?Mt:" "})).every((function(t,n){return" "===t?e[n].value===t:e[n].type===t}))},i=0;i<c.length-r+1;i++){var o=c.slice(i,i+r);if(a(o)){var s=o.map((function(e){return e.value})).join("");Dt(e.term,s)&&c.splice(i,r,{id:e.id,type:Pt,value:s,term:t.find((function(t){return t.id===e.id}))})}}}));var b=n?Math.max.apply(Math,Object(ce.a)(c.map((function(e){return e.type!==Mt?0:e.value.length})))):1;return c.map((function(e){return e.type!==Mt||e.value.length/b>=W?e:{type:Ht,value:e.value}}))},Ut=n(64),_t=n(296),Gt=function(e){var t=e.value,n=e.step,r=e.marks,a=e.onChange,c=kt(),i=r[0].value,o=r.slice(-1)[0].value,s=r.map((function(e,t){var n=e.value,a=e.label;return{value:n,label:function(){var e=a?a.split("_").reduce((function(e,t,n,r){return n===r.length-1?[].concat(Object(ce.a)(e),[t]):[].concat(Object(ce.a)(e),[t,Object(Fe.jsx)("br",{},n)])}),[]):n;return 0===t?Object(Fe.jsx)("span",{className:c.sliderMarkLeft,children:e}):t===r.length-1?Object(Fe.jsx)("span",{className:c.sliderMarkRight,children:e}):Object(Fe.jsx)("span",{children:e})}()}}));return Object(Fe.jsx)(_t.a,{className:c.slider,color:"primary",value:t,min:i,max:o,step:n,marks:s,valueLabelDisplay:"auto",onChange:a})},Jt=[{param:"maxWidth",label:"\u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0448\u0438\u0440\u0438\u043d\u0430 \u043e\u0431\u043b\u0430\u0441\u0442\u0438 \u043a\u043e\u043d\u0442\u0435\u043d\u0442\u0430",min:1e3,max:1920,step:10},{param:"lineHeight",label:"\u0412\u044b\u0441\u043e\u0442\u0430 \u0441\u0442\u0440\u043e\u043a\u0438",min:24,max:32,step:1},{param:"fontSize",label:"\u0420\u0430\u0437\u043c\u0435\u0440 \u0448\u0440\u0438\u0444\u0442\u0430",min:12,max:16,step:2},{param:"grid.columnGutter",label:"\u0428\u0438\u0440\u0438\u043d\u0430 \u043c\u0435\u0436\u043a\u043e\u043b\u043e\u043d\u043e\u0447\u043d\u043e\u0433\u043e \u0438\u043d\u0442\u0435\u0440\u0432\u0430\u043b\u0430",min:8,max:64,step:8},{param:"focusLine",label:"\u0412\u044b\u0441\u043e\u0442\u0430 \u043b\u0438\u043d\u0438\u0438 \u0444\u043e\u043a\u0443\u0441\u0430",min:0,max:20,step:1}],Yt=function(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e.layout})),n=kt(),r=Object(a.useState)(!1),c=Object(E.a)(r,2),i=c[0],o=c[1],s=Object(a.useRef)(null),l=function(){s.current=JSON.stringify(t)};Object(a.useEffect)((function(){s.current||l()}),[t]);Object(a.useEffect)((function(){var e=s.current!==JSON.stringify(t);e!==i&&o(e)}),[i,t]);Object(a.useEffect)((function(){return function(){e(Re(JSON.parse(s.current)))}}),[]);return Object(Fe.jsx)(wt,{header:{title:"\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b \u043f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u044f",backRoute:X,saveButton:{disabled:!i,onSave:function(){e(Ae()),o(!1),l()}}},children:Object(Fe.jsxs)("div",{className:n.drawerItem,children:[Object(Fe.jsx)(Be.a,{className:n.info,severity:"info",children:"\u0420\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u0435\u0442\u0441\u044f \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u0442\u0430\u043a\u0443\u044e \u0432\u044b\u0441\u043e\u0442\u0443 \u0441\u0442\u0440\u043e\u043a\u0438, \u0447\u0442\u043e\u0431\u044b \u043e\u043d\u0430 \u0431\u044b\u043b\u0430 \u043c\u0435\u043d\u044c\u0448\u0435 \u0448\u0438\u0440\u0438\u043d\u044b \u043c\u0435\u0436\u043a\u043e\u043b\u043e\u043d\u043e\u0447\u043d\u043e\u0433\u043e \u0438\u043d\u0442\u0435\u0440\u0432\u0430\u043b\u0430."}),Jt.map((function(r){return Object(Fe.jsxs)("div",{className:n.drawerItemParam,children:[Object(Fe.jsx)(_e.a,{variant:"body1",children:r.label}),Object(Fe.jsx)(Gt,{value:Object(Ut.get)(t,r.param),step:r.step,marks:[r.min,r.max].map((function(e){return{value:e}})),onChange:function(n,a){return function(n,r){if(r!==Object(Ut.get)(t,n)){var a=Object(Ut.set)(JSON.parse(JSON.stringify(t)),n,r);e(Re(a))}}(r.param,a)}})]},r.param)}))]})})},qt=n(125),Kt=n.n(qt),Zt=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter(Boolean).join(" ")},Vt=function(e,t){var n=Math.abs(e.x-t.x-t.w/2),r=Math.abs(e.y-t.y-t.h/2);if(n>t.w/2+e.r)return!1;if(r>t.h/2+e.r)return!1;if(n<=t.w/2)return!0;if(r<=t.h/2)return!0;var a=n-t.w/2,c=r-t.h/2;return a*a+c*c<=e.r*e.r},Xt={parts:{},prevHoveredParts:[]},Qt=null,$t=function(){Qt=JSON.parse(JSON.stringify(Xt))};$t();var en={x:0,y:0,r:15,isMoving:!1},tn=function(){var e=Object(a.useRef)(en);return{gaze:e.current,onGazeMove:function(t){!function(t){e.current.x=t.clientX,e.current.y=t.clientY,e.current.isMoving=!0}(t)}}},nn={cy:0,height:0,topY:0,bottomY:0},rn=function(e){var t=e.gaze,n=Object(Tt.a)(),r=Object(a.useState)(null),c=Object(E.a)(r,2),i=c[0],o=c[1],s=Object(a.useRef)(null),l=Object(a.useRef)(nn),u=function(){return null===i||void 0===i?void 0:i.getBoundingClientRect()};Object(a.useEffect)((function(){if(i){var e=function(){var e=(u().y||0)+parseFloat(n.layout.getTop()),t=n.layout.lineHeight;return{cy:e,height:t,topY:e-t/2,bottomY:e+t/2}}();JSON.stringify(e)!==JSON.stringify(l.current)&&(l.current=e)}}),[i,n.layout]);var d=function(){return u().height-s.current.getBoundingClientRect().height};return{containerSupportRef:s,setContentContainer:o,isGazeInsideGazeSpace:function(){var e=u(),n=e.x,r=e.y,a=e.width,c=e.height;return Vt(t,{x:n,y:r,w:a,h:c})},scroll:function(){var e=Math.round(function(){var e=u(),n=e.y,r=e.height;return t.y<l.current.topY?5*((l.current.topY-t.y)/(l.current.topY-n)):t.y>l.current.bottomY?5*((l.current.bottomY-t.y)/(n+r-l.current.bottomY)):0}()),n=(parseFloat(s.current.style.top)||0)+e;n>0?n=0:n<d()&&(n=d()),s.current.style.top="".concat(n,"px")}}},an=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return function(n,r){var a=r().blockEditor;n({type:I,payload:{show:!a.addBlockDialog.show,order:e,direction:t}})}},cn=Object(Xe.a)((function(e){return{container:{position:"absolute",top:0,zIndex:999,pointerEvents:"none",width:"100%",height:"100%",display:"flex",justifyContent:"space-between"},column:{width:e.layout.getWidth(1),backgroundColor:"rgba(245, 0, 87, 0.03)",outline:"1px solid rgba(245, 0, 87, 0.1)"}}})),on=function(){var e=Object(Tt.a)(),t=cn();return Object(Fe.jsx)("div",{className:t.container,children:Object(ce.a)(new Array(e.layout.grid.columnsNumber)).map((function(e,n){return Object(Fe.jsx)("div",{className:t.column},n)}))})},sn=n(263),ln=n(264),un=n(265),dn=n(266),jn=n(267),bn=n(268),fn=n(269),On=Object(Xe.a)((function(e){return{icon:{color:"#fff",backgroundColor:e.palette.primary.main,boxShadow:e.shadows[3],"&:hover":{backgroundColor:e.palette.primary.light}}}})),hn=(n(184),function(e){var t=e.block,n=e.canMoveUp,r=e.canMoveDown,c=e.blockActions,i=Object(u.b)(),o=Object(R.g)(),s=Object(R.h)(),l=s.scenarioId,d=s.blockId,j=On(),b=Object(a.useState)(null),f=Object(E.a)(b,2),O=f[0],h=f[1],m=function(){h(null)},p=function(e){m(),i(an(t.order,e))},x=[[{title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c",icon:Object(Fe.jsx)(sn.a,{color:"primary"}),to:ne(l,t.id)},{visible:n,title:"\u041f\u0435\u0440\u0435\u043c\u0435\u0441\u0442\u0438\u0442\u044c \u0432\u0432\u0435\u0440\u0445",icon:Object(Fe.jsx)(ln.a,{color:"primary"}),onClick:function(){m(),c.moveUp(t)}},{visible:r,title:"\u041f\u0435\u0440\u0435\u043c\u0435\u0441\u0442\u0438\u0442\u044c \u0432\u043d\u0438\u0437",icon:Object(Fe.jsx)(un.a,{color:"primary"}),onClick:function(){m(),c.moveDown(t)}},{title:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c",icon:Object(Fe.jsx)(dn.a,{color:"secondary"}),onClick:function(){m(),c.delete(t),d&&o.push(ee(l))}}],[{title:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0431\u043b\u043e\u043a \u0441\u0432\u0435\u0440\u0445\u0443",icon:Object(Fe.jsx)(jn.a,{color:"primary"}),onClick:function(){return p(-1)}},{title:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0431\u043b\u043e\u043a \u0441\u043d\u0438\u0437\u0443",icon:Object(Fe.jsx)(bn.a,{color:"primary"}),onClick:function(){return p(1)}}]];return Object(Fe.jsxs)(Fe.Fragment,{children:[Object(Fe.jsx)("div",{className:"content-block-actions-container",children:Object(Fe.jsx)(Je.a,{className:j.icon,size:"small",onClick:function(e){h(e.currentTarget)},children:Object(Fe.jsx)(fn.a,{})})}),Object(Fe.jsx)($e,{anchorEl:O,onClose:m,children:x})]})}),mn=(n(185),function(e){var t=e.block,n=Object(Tt.a)();return Object(Fe.jsx)("div",{className:"content-block-item image",style:{backgroundImage:"url(".concat(t.image.src,")"),backgroundSize:t.image.size,height:t.image.height?"".concat(n.layout.lineHeight*t.image.height,"px"):"auto",top:t.type===G?n.layout.getTop():"auto"}})}),pn=(n(186),function(e){var t=e.blockId,n=e.paragraphIndex,r=e.children,a=e.getTextPartClass;return"string"===typeof r?r:r.map((function(e,r){var c=e.type===Pt,i=e.type===Mt,o=function(){var a="".concat(t,"__").concat(n,"__").concat(e.id,"__").concat(r);return c?{className:L,id:a}:i?{className:D,id:a}:{className:void 0,id:void 0}}(),s=o.className,l=o.id;return Object(Fe.jsx)("span",{className:Zt(s,a&&l&&a(l)),id:l,children:e.value},r)}))}),xn=Object(Xe.a)((function(e){return{alert:{padding:"".concat(e.layout.lineHeight,"px"),"& .MuiAlert-icon":{padding:0},"& .MuiAlert-message":{padding:0,fontFamily:e.layout.fontFamily,fontSize:"".concat(e.layout.fontSize,"px"),lineHeight:"".concat(e.layout.lineHeight,"px")}}}})),gn=function(e){var t=e.severity,n=e.children,r=xn();return Object(Fe.jsx)(Be.a,{className:r.alert,severity:t,variant:"standard",children:n})},vn=n(270),yn=n(271),kn=n(297),wn=n(273),Nn=n(272),Cn=Object(Xe.a)((function(e){return{card:{"& span":{fontFamily:e.layout.fontFamily,fontSize:"".concat(e.layout.fontSize,"px"),lineHeight:"".concat(e.layout.lineHeight,"px")}},header:{padding:"".concat(e.layout.lineHeight,"px ").concat(e.layout.lineHeight,"px 0 ").concat(e.layout.lineHeight,"px !important")},content:{padding:"".concat(e.layout.lineHeight,"px !important")}}})),In=function(e){var t=e.term,n=e.showMenu,r=e.splittedTextData,i=e.onTermDialogOpen,o=Object(u.b)(),s=Cn(),l=Object(Tt.a)(),d=Object(a.useState)(null),j=Object(E.a)(d,2),b=j[0],f=j[1],O=t.term.toLowerCase(),h=t.synonyms.map((function(e){return e.toLowerCase()})),m=[[{title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c",icon:Object(Fe.jsx)(sn.a,{color:"primary"}),onClick:function(){i(t)}},{title:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c",icon:Object(Fe.jsx)(dn.a,{color:"secondary"}),onClick:function(){var e;o((e=t.id,function(t){t({type:N,payload:Ie(e)}),t(Te("warning","\u0422\u0435\u0440\u043c\u0438\u043d ".concat(e," \u0443\u0434\u0430\u043b\u0435\u043d")))}))}}]];return Object(Fe.jsxs)(Fe.Fragment,{children:[Object(Fe.jsx)($e,{anchorEl:b,onClose:function(){f(null)},children:m}),Object(Fe.jsxs)(vn.a,{className:s.card,variant:"outlined",elevation:3,children:[Object(Fe.jsx)(yn.a,{className:s.header,title:O,subheader:h.map((function(e,t){return Object(Fe.jsxs)(c.a.Fragment,{children:[e,t!==h.length-1?Object(Fe.jsx)(Fe.Fragment,{children:"\xa0\u2022\xa0"}):null]},t)})),avatar:Object(Fe.jsx)(kn.a,{style:{backgroundColor:"rgb(232, 244, 253)",width:l.spacing(5),height:l.spacing(5)},children:Object(Fe.jsx)(Nn.a,{style:{color:"#2196f3",width:l.spacing(3),height:l.spacing(3)}})}),action:n&&Object(Fe.jsx)(Je.a,{size:"small",style:{marginLeft:l.spacing(2)},onClick:function(e){f(e.currentTarget)},children:Object(Fe.jsx)(fn.a,{})})}),Object(Fe.jsx)(wn.a,{className:s.content,children:Object(Fe.jsx)("p",{children:function(){if(!r)return t.definition;var e=r.blockId,n=r.paragraphIndex;return Object(Fe.jsx)(pn,{blockId:e,paragraphIndex:n,children:t.definition})}()})})]})]})},Sn=Object(Xe.a)((function(e){return{item:{padding:"".concat(e.layout.lineHeight,"px ").concat(e.layout.getWidth(1)),backgroundColor:"#fff"}}})),Tn=Object(Xe.a)((function(e){return{title:{fontFamily:e.layout.fontFamily,fontSize:e.layout.titleFontSize,lineHeight:e.layout.titleLineHeight,marginBottom:"".concat(e.layout.lineHeight,"px")},text:{"& > *":{"& + *":{marginTop:"".concat(e.layout.lineHeight,"px")}},"& p":{fontFamily:e.layout.fontFamily,fontSize:"".concat(e.layout.fontSize,"px"),lineHeight:"".concat(e.layout.lineHeight,"px")}}}})),En=(n(187),function(e){var t=e.block,n=e.parentType,r=e.cascade,a=e.getTextPartClass,c=Object(Tt.a)(),i=Sn(),o=Tn();return Object(Fe.jsxs)("div",{className:i.item,style:{width:t.params.textWidth?c.layout.getWidth(t.params.textWidth):"auto",flex:r||n!==J?"none":1,position:"sticky",alignSelf:"flex-start",top:c.layout.getTop()},children:[t.title?Object(Fe.jsx)("div",{className:o.title,children:t.title}):null,Object(Fe.jsx)("div",{className:o.text,children:t.text.map((function(e,n){var r,c=function(e){return Object(Fe.jsx)(pn,{blockId:t.id,paragraphIndex:n,getTextPartClass:a,children:e})};if(e.id)return Object(Fe.jsx)(In,{term:e,splittedTextData:{blockId:t.id,paragraphIndex:n}},n);var i=null===(r=e[0])||void 0===r?void 0:r.value;if(Object.values(F).includes(i)){var o=Object.entries(F).find((function(e){return Object(E.a)(e,2)[1]===i}))[0].toLowerCase();return Object(Fe.jsx)(gn,{severity:o,children:c(e.slice(1))},n)}return Object(Fe.jsx)("p",{children:c(e)},n)}))})]})}),Rn=(n(188),function(e){var t=e.block,n=Object(Fe.jsx)(En,Object(x.a)({},e)),r=Object(Fe.jsx)(mn,Object(x.a)({},e));return("left"===t.image.position?[r,n]:[n,r]).map((function(e,t){return Object(x.a)(Object(x.a)({},e),{},{key:t})}))}),An=(n(189),function(e){return Object(Fe.jsxs)(Fe.Fragment,{children:[Object(Fe.jsx)(mn,Object(x.a)({},e)),Object(Fe.jsx)(En,Object(x.a)(Object(x.a)({},e),{},{parentType:"text-image-vertical"}))]})}),zn=n(126),Wn=(n(190),function(e){var t=e.modes,n=e.children,r=Object(zn.a)(),c=r.ref,i=r.inView,o=Object(a.useState)(!1),s=Object(E.a)(o,2),l=s[0],u=s[1];return Object(a.useEffect)((function(){!l&&i&&u(!0)}),[i,l]),t.includes(H)?Object(Fe.jsx)("div",{ref:c,className:Zt("fade-in-container",l&&"is-visible"),children:n}):n}),Mn=(n(191),function(e){var t=e.modes,n=e.block,r=e.canMoveUp,a=e.canMoveDown,c=e.cascade,i=e.blockActions,o=e.getTextPartClass,s=Object(Tt.a)();return Object(Fe.jsxs)(Wn,{modes:t,children:[t.includes(P)?Object(Fe.jsx)(hn,{block:n,canMoveUp:r,canMoveDown:a,blockActions:i}):null,Object(Fe.jsx)("div",{className:"content-block content-block-type--".concat(n.type),style:{width:n.params.width?s.layout.getWidth(n.params.width):n.params.textWidth?s.layout.getWidth(n.params.textWidth):"auto",height:c?"auto":"100%"},children:function(e){switch(n.type){case U:return Object(Fe.jsx)(En,Object(x.a)({},e));case _:return Object(Fe.jsx)(mn,Object(x.a)({},e));case G:return Object(Fe.jsx)(Rn,Object(x.a)({},e));case J:return Object(Fe.jsx)(An,Object(x.a)({},e));default:return null}}({block:n,cascade:c,getTextPartClass:o})})]})}),Hn=Object(Xe.a)((function(e){return{container:{position:"relative",display:"flex",flexWrap:"wrap",justifyContent:"center",width:"100%","& + div":{marginTop:e.layout.lineHeight}}}})),Pn=function(e){var t=e.blocks,n=e.allBlocksLength,r=e.modes,a=e.autoScroll,c=e.cascade,i=e.blockActions,o=e.getTextPartClass,s=Object(Tt.a)(),l=Hn(),u=Object(R.h)().blockId;return Object(Fe.jsx)("div",{className:l.container,children:t.map((function(e,l){var d={width:s.layout.getWidth(e.params.width||e.params.textWidth)};t.length>1&&l>0&&(d.marginLeft=s.layout.grid.columnGutter);var j=u&&e.id===u,b=u&&e.id!==u;return Object(Fe.jsx)("div",{ref:function(t){if(c&&(null===t||void 0===t?void 0:t.previousSibling)){var n=(a?t.previousSibling.childNodes[0].childNodes[0].getBoundingClientRect():t.previousSibling.childNodes[0].getBoundingClientRect()).height+(parseFloat(t.previousSibling.style.marginTop)||0)-3*s.layout.lineHeight-(e.type!==J?0:t.querySelector(".image").getBoundingClientRect().height);t.style.marginTop="".concat(n,"px")}},className:Zt("content-block-container",j&&"highlighted-block",b&&"not-highlighted-block"),style:d,children:Object(Fe.jsx)(Mn,{block:e,canMoveUp:0!==e.index,canMoveDown:e.index!==n-1,modes:r,cascade:c,blockActions:i,getTextPartClass:o})},l)}))})},Bn=Object(Xe.a)((function(e){return{container:{position:"relative",display:"flex",flexWrap:"wrap",margin:"".concat(e.layout.getTop()," 0")}}})),Fn=function(e){var t=e.modes,n=e.blocks,r=e.autoScroll,c=e.cascade,i=e.blockActions,o=e.finishViewing,s=e.getTextPartClass,l=Bn(),u=Object(Tt.a)(),d=Object(a.useState)(null),j=Object(E.a)(d,2),b=j[0],f=j[1],O=Object(a.useMemo)((function(){var e=[],t=0;return n.forEach((function(n,r){var a=Object(x.a)(Object(x.a)({},n),{},{index:r});e[t]||(e[t]={width:0,blocks:[]});var c=a.type===U?a.params.textWidth:a.params.width,i=e[t];c>u.layout.grid.columnsNumber-2&&0===i.width||i.width+c<=u.layout.grid.columnsNumber?(e[t].width+=c,e[t].blocks.push(a)):(e.push({width:c,blocks:[a]}),t++)})),e}),[n,u.layout.grid.columnsNumber]);return Object(a.useEffect)((function(){b&&window.onresize&&window.onresize()}),[b]),Object(Fe.jsxs)("div",{ref:f,className:l.container,children:[O.map((function(e,a){return Object(Fe.jsx)(Pn,{blocks:e.blocks,allBlocksLength:n.length,modes:t,autoScroll:r,cascade:c,blockActions:i,getTextPartClass:s},a)})),t.includes(H)&&Object(Fe.jsx)(Fe.Fragment,{children:Object(Fe.jsx)("div",{className:"content-blocks-group",children:Object(Fe.jsx)(Ge.a,{variant:"contained",color:"primary",disableElevation:!0,onClick:o,children:"\u0417\u0430\u043a\u043e\u043d\u0447\u0438\u0442\u044c \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440"})})})]})},Dn=Object(Xe.a)((function(e){return{containerSupport:{position:"relative",width:"100%",flex:"1",maxWidth:e.layout.maxWidth}}})),Ln=(n(192),function(e){var t=e.autoScroll,n=e.blocks,r=e.modes,c=e.cascade,i=e.containerWidth,o=e.blockActions,s=e.expandTerms,l=e.getTextPartClass,d=Object(u.b)(),j=Object(R.g)(),b=Object(Tt.a)(),f=Dn(),O=tn(),h=O.gaze,m=O.onGazeMove,p=rn({gaze:h}),x=p.containerSupportRef,g=p.setContentContainer,v=p.isGazeInsideGazeSpace,y=p.scroll;Object(a.useEffect)((function(){return function(){$t()}}),[]);var k=r.includes(H),w=function(){var e=function(e){return Object.fromEntries(Object(ce.a)(document.querySelectorAll(".".concat(e))).map((function(e){var t=e.getBoundingClientRect(),n=t.x,r=t.y,a=t.width,c=t.height;return[e.id,{x:n,y:r,w:a,h:c}]})))},t={terms:e(L),words:e(D)},n=function(e,t){var n=function(n){return Object.entries(function(){switch(n){case Pt:return t.terms;case Mt:return t.words;default:return null}}()).filter((function(t){var n=Object(E.a)(t,2),r=(n[0],n[1]);return Vt(e,r)})).map((function(e){var t=Object(E.a)(e,1)[0];return{type:n,id:t.split("__")[2],partId:t}}))},r=n(Pt),a=n(Mt),c=[].concat(Object(ce.a)(r),Object(ce.a)(a)),i=[];return c.forEach((function(e){var t=e.type,n=e.id,r=e.partId;Qt.parts[r]||(Qt.parts[r]={id:n,type:t,isRecognized:null,fixations:[]});var a=Qt.prevHoveredParts.findIndex((function(e){return e.partId===r}));if(-1===a?Qt.parts[r].fixations.push([Date.now()]):Qt.prevHoveredParts.splice(a,1),!1!==Qt.parts[r].isRecognized){var c=Qt.parts[r].fixations.reduce((function(e,t){var n=Object(E.a)(t,1)[0];return e+((t[1]||Date.now())-n)}),0)<=750;t===Pt&&(c||Object.values(Qt.parts).find((function(e){return e.id===n&&!e.isRecognized}))||i.push(r)),Qt.parts[r].isRecognized=c}})),Qt.prevHoveredParts.forEach((function(e){var t=e.partId,n=Qt.parts[t].fixations;Qt.parts[t].fixations[n.length-1].push(Date.now())})),Qt.prevHoveredParts=c,i}(h,t);n.length&&s(n)};Kt()((function(){k&&v()&&h.isMoving&&(y(),h.isMoving=!1,w())}));var N=function(){var e,t;!function(e){var t=de(le.MONITORING);Se([].concat(Object(ce.a)(t),[e]))}({id:Object(oe.a)(),date:Date.now(),layout:(e=b.layout,t=Object.keys(ue[le.LAYOUT]),Object.fromEntries(t.map((function(t){return[t,e[t]]})))),containerWidth:x.current.clientWidth,blocks:n,monitoringData:Qt.parts}),j.replace(Z)};return Object(Fe.jsx)("div",{ref:g,id:"contentHeight",className:Zt.apply(void 0,["content-container",t&&"auto-scroll-content"].concat(Object(ce.a)(r))),style:{justifyContent:(null===n||void 0===n?void 0:n.length)?"flex-start":"center"},onMouseMove:m,children:function(){if(!n.length)return Object(Fe.jsx)(Ge.a,{startIcon:Object(Fe.jsx)(bt.a,{}),variant:"outlined",color:"primary",onClick:function(){return d(an())},children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0431\u043b\u043e\u043a"});return Object(Fe.jsx)(Fe.Fragment,{children:Object(Fe.jsxs)("div",{ref:x,id:"contentWidth",className:f.containerSupport,style:i?{width:"".concat(i,"px")}:{},children:[r.includes(B)?Object(Fe.jsx)(on,{}):null,Object(Fe.jsx)(Fn,{modes:r,blocks:n.sort((function(e,t){return e.order-t.order})),autoScroll:t,cascade:c,blockActions:o,finishViewing:N,getTextPartClass:l})]})})}()})}),Un=n(278),_n=n(274),Gn=n(275),Jn=n(276),Yn=n(277),qn=Object(Xe.a)((function(e){return{avatar:{background:"#64b5f6"}}})),Kn=[{type:U,name:"\u0422\u0435\u043a\u0441\u0442",icon:Object(Fe.jsx)(_n.a,{})},{type:_,name:"\u0418\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435",icon:Object(Fe.jsx)(Gn.a,{})},{type:G,name:"\u0422\u0435\u043a\u0441\u0442 \u0438 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435 \u043f\u043e \u0433\u043e\u0440\u0438\u0437\u043e\u043d\u0442\u0430\u043b\u0438",icon:Object(Fe.jsx)(Jn.a,{})},{type:J,name:"\u0422\u0435\u043a\u0441\u0442 \u0438 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435 \u043f\u043e \u0432\u0435\u0440\u0442\u0438\u043a\u0430\u043b\u0438",icon:Object(Fe.jsx)(Yn.a,{style:{transform:"rotate(180deg)"}})}],Zn=function(){var e=["./assets/block-image-1.jpg","./assets/block-image-2.jpg","./assets/block-image-3.jpg"];return e[Math.floor(Math.random()*e.length)]},Vn=function(e){var t=e.scenario,n=e.setScenarioBlocks,r=Object(Tt.a)(),a=Object(R.g)(),c=qn(),i=Object(u.b)(),o=Object(u.c)((function(e){return e.blockEditor})).addBlockDialog,s=function(){i(an())};return Object(Fe.jsxs)(st.a,{open:o.show,onClose:s,children:[Object(Fe.jsx)(lt.a,{children:"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0431\u043b\u043e\u043a\u0430"}),Object(Fe.jsx)(rt.a,{children:Kn.map((function(e){return Object(Fe.jsxs)(at.a,{button:!0,onClick:function(){return function(e){var c={id:Object(oe.a)(),order:o.order||0,type:e,params:{}};e.includes(_)&&(c.image={src:Zn(),size:"cover"},e===_&&(c.params.width=r.layout.grid.columnsNumber),c.image.height=e===G?0:8),e.includes(U)&&(c.title="\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u043e\u043d\u043d\u043e\u0433\u043e \u0431\u043b\u043e\u043a\u0430",c.text=["\u041e\u0441\u043d\u043e\u0432\u043d\u043e\u0439 \u0442\u0435\u043a\u0441\u0442 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u043e\u043d\u043d\u043e\u0433\u043e \u0431\u043b\u043e\u043a\u0430"],e===G?(c.params.width=r.layout.grid.columnsNumber,c.params.textWidth=Math.floor(W*c.params.width)):e===J?c.params.width=Math.floor(r.layout.grid.columnsNumber/2):c.params.textWidth=r.layout.grid.columnsNumber);var i=o.direction?t.blocks.map((function(e){return o.direction>0&&e.order<=c.order?Object(x.a)(Object(x.a)({},e),{},{order:e.order-1}):o.direction<0&&e.order>=c.order?Object(x.a)(Object(x.a)({},e),{},{order:e.order+1}):e})):t.blocks;n([].concat(Object(ce.a)(i),[c])),s(),a.push(ne(t.id,c.id))}(e.type)},children:[Object(Fe.jsx)(Un.a,{children:Object(Fe.jsx)(kn.a,{className:c.avatar,children:e.icon})}),Object(Fe.jsx)(ct.a,{primary:e.name})]},e.type)}))})]})},Xn=function(e){var t=e.scenario,n=e.modes,r=e.autoScroll,c=e.cascade,i=e.containerWidth,o=e.blockActions,s=e.setScenarioBlocks,l=e.getTextPartClass,d=Object(u.b)(),j=Object(u.c)((function(e){return e.thesaurus})),b=Object(R.h)().scenarioId,f=Object(a.useState)(null),O=Object(E.a)(f,2),h=O[0],m=O[1];Object(a.useEffect)((function(){if(!t&&!h){var e=d(ze(b));if(e){var r=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return Object.fromEntries(Object.entries(e).map((function(e){var r=Object(E.a)(e,2);return[r[0],r[1].map((function(e){return Lt(e,t,n)}))]})))}(Object.fromEntries(e.blocks.filter((function(e){return e.text})).map((function(e){return[e.id,e.text]}))),j,!n.includes(B)),a=e.blocks.map((function(e){var t=r[e.id];return t?Object(x.a)(Object(x.a)({},e),{},{text:t}):e}));m(a)}else m(void 0)}}),[h,d,n,t,b,j]);var p=(null===t||void 0===t?void 0:t.blocks)||h;if(!p)return void 0===p?Object(Fe.jsx)(R.a,{to:Z}):null;return Object(Fe.jsxs)(Fe.Fragment,{children:[Object(Fe.jsx)(Ln,{autoScroll:r,blocks:p,modes:n,cascade:c,containerWidth:i,blockActions:o,expandTerms:function(e){m(p.map((function(t){if(!t.text)return t;return Object(x.a)(Object(x.a)({},t),{},{text:function(){for(var n=JSON.parse(JSON.stringify(t.text)),r=0;r<e.length;r++){var a=e[r].split("__"),c=Object(E.a)(a,3),i=c[0],o=c[1],s=c[2];if(t.id===i){var l=d(Me(s)),u=Object(x.a)(Object(x.a)({},l),{},{definition:Lt(l.definition,j,!0)});n.splice(parseInt(o)+1,0,u)}}return n}()})})))},getTextPartClass:l}),n.includes(P)&&Object(Fe.jsx)(Vn,{scenario:t,setScenarioBlocks:s})]})},Qn=function(){var e=Object(u.c)((function(e){return e.thesaurus})),t=Object(Tt.a)(),n={blocks:[{type:G,title:"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u043e\u043d\u043d\u043e\u0433\u043e \u0431\u043b\u043e\u043a\u0430",text:["\u041a\u043e\u043c\u043f\u044c\u044e\u0442\u0435\u0440\u044b \u043a\u043e\u0440\u0435\u043d\u043d\u044b\u043c \u043e\u0431\u0440\u0430\u0437\u043e\u043c \u0438\u0437\u043c\u0435\u043d\u0438\u043b\u0438 \u0436\u0438\u0437\u043d\u044c \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u0447\u0435\u043b\u043e\u0432\u0435\u043a\u0430. \u041d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0434\u0435\u0441\u044f\u0442\u0438\u043b\u0435\u0442\u0438\u0439 \u043d\u0430\u0437\u0430\u0434 \u043b\u044e\u0434\u0438 \u0434\u0430\u0436\u0435 \u043d\u0435 \u0437\u043d\u0430\u043b\u0438 \u043d\u0438\u0447\u0435\u0433\u043e \u043e\u0431 \u044d\u0442\u0438\u0445 \u044d\u043b\u0435\u043a\u0442\u0440\u043e\u043d\u043d\u044b\u0445 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430\u0445, \u0442\u043e\u0433\u0434\u0430 \u043a\u0430\u043a \u0432 \u043d\u0430\u0448\u0438 \u0434\u043d\u0438 \u0434\u0430\u0436\u0435 \u043c\u0430\u043b\u0435\u043d\u044c\u043a\u0438\u0439 \u0440\u0435\u0431\u0435\u043d\u043e\u043a \u043c\u043e\u0436\u0435\u0442 \u0443\u043f\u0440\u0430\u0432\u043b\u044f\u0442\u044c \u044d\u0442\u043e\u0439 \u043c\u0430\u0448\u0438\u043d\u043e\u0439. \u041f\u043e\u0447\u0442\u0438 \u0432\u0441\u0435 \u0441\u043e\u0432\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435 \u0442\u0435\u0445\u043d\u043e\u043b\u043e\u0433\u0438\u0438 \u0437\u0430\u0432\u0438\u0441\u0438\u0442 \u043e\u0442 \u043a\u043e\u043c\u043f\u044c\u044e\u0442\u0435\u0440\u043e\u0432, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u044e\u0442\u0441\u044f \u0434\u043b\u044f \u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f \u0434\u0430\u043d\u043d\u044b\u0445: \u0444\u0430\u0439\u043b\u043e\u0432, \u0441\u0435\u043a\u0440\u0435\u0442\u043d\u043e\u0439 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0438, \u0431\u0430\u043d\u043a\u043e\u0432\u0441\u043a\u0438\u0445 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0439 \u0438 \u043f\u0440\u043e\u0447\u0435\u0433\u043e.","\u0421\u0435\u0433\u043e\u0434\u043d\u044f \u043b\u044e\u0434\u0438 \u043d\u0435 \u043f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u044f\u044e\u0442 \u0441\u0432\u043e\u044e \u0436\u0438\u0437\u043d\u044c \u0431\u0435\u0437 \u0441\u043e\u0432\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0445 \u0442\u0435\u0445\u043d\u043e\u043b\u043e\u0433\u0438\u0439, \u0432 \u0447\u0430\u0441\u0442\u043d\u043e\u0441\u0442\u0438, \u0431\u0435\u0437 \u043a\u043e\u043c\u043f\u044c\u044e\u0442\u0435\u0440\u0430.","\u041d\u043e \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u0430 \u0432 \u0442\u043e\u043c, \u0447\u0442\u043e \u0432\u043c\u0435\u0441\u0442\u0435 \u0441 \u043f\u043e\u043b\u043e\u0436\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u043c \u044d\u0444\u0444\u0435\u043a\u0442\u043e\u043c, \u043a\u043e\u043c\u043f\u044c\u044e\u0442\u0435\u0440\u044b \u043e\u043a\u0430\u0437\u044b\u0432\u0430\u044e\u0442 \u043d\u0435\u0433\u0430\u0442\u0438\u0432\u043d\u043e\u0435 \u0432\u043b\u0438\u044f\u043d\u0438\u0435 \u043d\u0430 \u0447\u0435\u043b\u043e\u0432\u0435\u043a\u0430."].map((function(t){return Lt(t,e,!1)})),image:{src:"./assets/block-image-1.jpg",height:0,size:"cover"},params:{width:t.layout.grid.columnsNumber,textWidth:Math.floor(W*t.layout.grid.columnsNumber)}}]};return Object(Fe.jsxs)(Fe.Fragment,{children:[Object(Fe.jsx)(Yt,{}),Object(Fe.jsx)(Xn,{scenario:n,modes:[B]})]})},$n=function(e){var t=e.scenario,n=e.isScenarioChanged,r=e.setInitialScenario,a=e.setScenario,c=Object(u.b)(),i=kt();return Object(Fe.jsx)(wt,{header:{title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0441\u0446\u0435\u043d\u0430\u0440\u0438\u044f",backRoute:X,saveButton:{disabled:!n,onSave:function(){c(function(e){return function(t){t({type:p,payload:ye(e)}),t(Te("success",'\u0421\u0446\u0435\u043d\u0430\u0440\u0438\u0439 "'.concat(e.title,'" \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d')))}}(t)),r(t)}}},children:Object(Fe.jsx)("div",{className:i.drawerItem,children:Object(Fe.jsx)("div",{className:i.drawerItemParam,children:Object(Fe.jsx)("div",{className:i.drawerItemParam,children:Object(Fe.jsx)(ot.a,{label:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0441\u0446\u0435\u043d\u0430\u0440\u0438\u044f",variant:"outlined",fullWidth:!0,value:t.title,onChange:function(e){a(Object(x.a)(Object(x.a)({},t),{},{title:e.target.value}))}})})})})})},er=n(257),tr=n(295),nr=n(290),rr=n(279),ar=function(e){var t=e.block,n=e.blockActions,r=Object(Tt.a)(),a=kt(),c=Object(R.h)().scenarioId,i=function(e,r){if(r!==Object(Ut.get)(t,e)){var a=Object(Ut.set)(JSON.parse(JSON.stringify(t)),e,r);n.updateParams(a)}};return Object(Fe.jsxs)(wt,{header:{title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0431\u043b\u043e\u043a\u0430",backRoute:ee(c),saveButton:{message:"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435 \u0431\u043b\u043e\u043a\u043e\u0432 \u043f\u0440\u043e\u0438\u0441\u0445\u043e\u0434\u0438\u0442 \u043f\u043e\u0441\u043b\u0435 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f \u0441\u0430\u043c\u043e\u0433\u043e \u0441\u0446\u0435\u043d\u0430\u0440\u0438\u044f."}},children:[Object(Fe.jsxs)("div",{className:a.drawerItem,children:[Object(Fe.jsx)(_e.a,{className:a.drawerItemTitle,variant:"h6",children:"\u041f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0431\u043b\u043e\u043a\u0430"}),Object(Fe.jsxs)("div",{className:a.drawerItemParam,children:[Object(Fe.jsx)(_e.a,{variant:"body1",children:"\u0428\u0438\u0440\u0438\u043d\u0430 \u0431\u043b\u043e\u043a\u0430"}),Object(Fe.jsx)(Gt,{value:t.params.width||t.params.textWidth,step:1,marks:[{value:4},{value:r.layout.grid.columnsNumber}],onChange:function(e,n){return i(t.params.width?"params.width":"params.textWidth",n)}})]}),t.type===G&&Object(Fe.jsxs)("div",{className:a.drawerItemParam,children:[Object(Fe.jsx)(_e.a,{variant:"body1",children:"\u041e\u0442\u043d\u043e\u0448\u0435\u043d\u0438\u0435 \u0448\u0438\u0440\u0438\u043d\u044b \u0442\u0435\u043a\u0441\u0442\u0430 \u0438 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f"}),Object(Fe.jsx)(Gt,{value:t.params.textWidth,step:1,marks:[{value:0,label:"\u0422\u0435\u043a\u0441\u0442"},{value:Math.floor(.38197000000000003*t.params.width),label:"\u0417\u043e\u043b\u043e\u0442\u043e\u0435_\u0441\u0435\u0447\u0435\u043d\u0438\u0435"},{value:Math.floor(W*t.params.width),label:"\u0417\u043e\u043b\u043e\u0442\u043e\u0435_\u0441\u0435\u0447\u0435\u043d\u0438\u0435"},{value:t.params.width,label:"\u0418\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435"}],onChange:function(e,t){return i("params.textWidth",t)}})]})]}),Object(Fe.jsx)(Ke.a,{}),t.type.includes(U)&&Object(Fe.jsxs)(Fe.Fragment,{children:[Object(Fe.jsxs)("div",{className:a.drawerItem,children:[Object(Fe.jsx)(_e.a,{className:a.drawerItemTitle,variant:"h6",children:"\u0422\u0435\u043a\u0441\u0442\u043e\u0432\u043e\u0435 \u043d\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435"}),Object(Fe.jsxs)(Be.a,{className:a.info,severity:"info",children:[Object(Fe.jsx)(rr.a,{children:"\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435 \u0442\u0435\u0433\u043e\u0432"}),"\u0414\u043b\u044f \u0444\u043e\u0440\u043c\u0430\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f \u043e\u0441\u043d\u043e\u0432\u043d\u043e\u0433\u043e \u0442\u0435\u043a\u0441\u0442\u0430 \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u044b \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0435 \u0442\u0435\u0433\u0438:",Object(Fe.jsxs)("div",{style:{marginTop:"8px"},children:[Object(Fe.jsxs)(_e.a,{variant:"body2",children:[Object(Fe.jsx)(_e.a,{component:"span",variant:"subtitle2",children:F.INFO}),"\xa0\u2014 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f"]}),Object(Fe.jsxs)(_e.a,{variant:"body2",children:[Object(Fe.jsx)(_e.a,{component:"span",variant:"subtitle2",children:F.WARNING}),"\xa0\u2014 \u043f\u0440\u0435\u0434\u0443\u043f\u0440\u0435\u0436\u0434\u0435\u043d\u0438\u0435"]}),Object(Fe.jsxs)(_e.a,{variant:"body2",children:[Object(Fe.jsx)(_e.a,{component:"span",variant:"subtitle2",children:F.ERROR}),"\xa0\u2014 \u043e\u0448\u0438\u0431\u043a\u0430"]})]})]}),Object(Fe.jsx)("div",{className:a.drawerItemParam,children:Object(Fe.jsx)(ot.a,{label:"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a",variant:"outlined",fullWidth:!0,value:t.title,onChange:function(e){return i("title",e.target.value)}})}),Object(Fe.jsx)("div",{className:a.drawerItemParam,children:Object(Fe.jsx)(ot.a,{label:"\u041e\u0441\u043d\u043e\u0432\u043d\u043e\u0439 \u0442\u0435\u043a\u0441\u0442",multiline:!0,variant:"outlined",fullWidth:!0,value:t.text.join("\n"),onChange:function(e){return i("text",e.target.value.split("\n"))}})})]}),t.type.includes("".concat(U,"-").concat(_))&&Object(Fe.jsx)(Ke.a,{})]}),t.type.includes(_)&&Object(Fe.jsxs)("div",{className:a.drawerItem,children:[Object(Fe.jsx)(_e.a,{className:a.drawerItemTitle,variant:"h6",children:"\u0418\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435"}),Object(Fe.jsx)("div",{className:a.drawerItemParam,children:Object(Fe.jsx)(ot.a,{label:"\u0421\u0441\u044b\u043b\u043a\u0430",variant:"outlined",fullWidth:!0,value:t.image.src,onChange:function(e){return i("image.src",e.target.value)}})}),Object(Fe.jsx)("div",{className:a.drawerItemParam,children:Object(Fe.jsxs)(er.a,{variant:"outlined",fullWidth:!0,children:[Object(Fe.jsx)(tr.a,{id:"block-image-size",children:"\u041c\u0430\u0441\u0448\u0442\u0430\u0431"}),Object(Fe.jsxs)(nr.a,{labelId:"block-image-size",label:"\u041c\u0430\u0441\u0448\u0442\u0430\u0431",value:t.image.size||"cover",onChange:function(e){return i("image.size",e.target.value)},children:[Object(Fe.jsx)(Ve.a,{value:"cover",children:"\u0417\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435"}),Object(Fe.jsx)(Ve.a,{value:"contain",children:"\u0426\u0435\u043b\u0438\u043a\u043e\u043c"})]})]})}),t.type===G&&Object(Fe.jsx)("div",{className:a.drawerItemParam,children:Object(Fe.jsxs)(er.a,{variant:"outlined",fullWidth:!0,children:[Object(Fe.jsx)(tr.a,{id:"block-image-position",children:"\u041f\u043e\u0437\u0438\u0446\u0438\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435"}),Object(Fe.jsxs)(nr.a,{labelId:"block-image-position",label:"\u041f\u043e\u0437\u0438\u0446\u0438\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435",value:t.image.position||"right",onChange:function(e){return i("image.position",e.target.value)},children:[Object(Fe.jsx)(Ve.a,{value:"right",children:"\u0421\u043f\u0440\u0430\u0432\u0430"}),Object(Fe.jsx)(Ve.a,{value:"left",children:"\u0421\u043b\u0435\u0432\u0430"})]})]})}),Object(Fe.jsxs)("div",{className:a.drawerItemParam,children:[Object(Fe.jsx)(_e.a,{variant:"body1",children:"\u0412\u044b\u0441\u043e\u0442\u0430 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f"}),Object(Fe.jsx)(Gt,{value:t.image.height||0,step:1,marks:[{value:0,label:"\u0410\u0432\u0442\u043e"},{value:16}],onChange:function(e,t){return i("image.height",t)}})]})]})]})},cr=function(){var e=Object(u.b)(),t=Object(R.h)(),n=t.scenarioId,r=t.blockId,c=Object(a.useState)(null),i=Object(E.a)(c,2),o=i[0],s=i[1],l=Object(a.useState)(null),d=Object(E.a)(l,2),j=d[0],b=d[1];if(Object(a.useEffect)((function(){if(!j){var t=e(ze(n));s(t),b(t)}}),[e,j,n]),!j)return void 0===j?Object(Fe.jsx)(R.a,{to:X}):null;var f=JSON.stringify(o)!==JSON.stringify(j),O=function(e){b(Object(x.a)(Object(x.a)({},j),{},{blocks:e}))},h=function(e,t){O(j.blocks.map((function(n){return n.id===e.id?Object(x.a)(Object(x.a)({},n),{},{order:t.order}):n.id===t.id?Object(x.a)(Object(x.a)({},n),{},{order:e.order}):n})))},m={updateParams:function(e){O(j.blocks.map((function(t){return t.id!==e.id?t:e})))},delete:function(e){O(j.blocks.filter((function(t){return t.id!==e.id})))},moveUp:function(e){var t=j.blocks.sort((function(e,t){return t.order-e.order})).find((function(t){return t.order<e.order}));t&&h(e,t)},moveDown:function(e){var t=j.blocks.sort((function(e,t){return e.order-t.order})).find((function(t){return t.order>e.order}));t&&h(e,t)}};return Object(Fe.jsxs)(Fe.Fragment,{children:[function(){if(r){var e=j.blocks.find((function(e){return e.id===r}));return e?Object(Fe.jsx)(ar,{block:e,blockActions:m}):Object(Fe.jsx)(R.a,{to:ee(n)})}return Object(Fe.jsx)($n,{scenario:j,isScenarioChanged:f,setInitialScenario:s,setScenario:b})}(),Object(Fe.jsx)(Xn,{scenario:j,modes:[P],blockActions:m,setScenarioBlocks:O})]})},ir=function(){var e=kt();return Object(Fe.jsx)(wt,{header:{title:"\u0422\u0435\u0437\u0430\u0443\u0440\u0443\u0441",backRoute:X,saveButton:{disabled:!0,onSave:function(){}}},children:Object(Fe.jsx)("div",{className:e.drawerItem,children:Object(Fe.jsx)(Be.a,{className:e.info,severity:"info",children:"\u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0439 \u0444\u0443\u043d\u043a\u0446\u0438\u043e\u043d\u0430\u043b \u0432 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0435."})})})},or=n(281),sr=n(287),lr=n(289),ur=n(280),dr=function(e){var t=e.isOpened,n=e.title,r=e.children,a=e.onClose,c=e.onUpdate;return Object(Fe.jsxs)(st.a,{open:t,fullWidth:!0,onClose:a,children:[Object(Fe.jsx)(lt.a,{children:n}),Object(Fe.jsx)(ut.a,{children:r}),Object(Fe.jsxs)(dt.a,{children:[Object(Fe.jsx)(Ge.a,{color:"primary",onClick:function(){c()&&a()},children:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c"}),Object(Fe.jsx)(Ge.a,{color:"default",onClick:a,children:"\u041e\u0442\u043c\u0435\u043d\u0430"})]})]})},jr=Object(Xe.a)((function(e){return{container:{padding:e.spacing(2,4),flex:1},header:{marginBottom:e.spacing(2)},cards:{display:"flex",flexWrap:"wrap","& > div":{display:"flex",flexDirection:"column",justifyContent:"space-between",margin:e.spacing(0,1,1,0)}}}})),br={id:"",term:"",synonym:"",synonyms:[],definition:""},fr=Object(x.a)({dialogType:null,errors:{}},br),Or="ADD_TERM",hr="UPDATE_TERM",mr=[],pr=function(){var e=jr(),t=Object(u.b)(),n=Object(u.c)((function(e){return e.thesaurus})),r=Object(a.useState)(fr),c=Object(E.a)(r,2),i=c[0],o=c[1],s=Object(a.useState)(mr),l=Object(E.a)(s,2),d=l[0],j=l[1],b=function(){var e=Object(At.a)(Rt.a.mark((function e(t){var n;return Rt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ft(t);case 2:n=e.sent,j(n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=Object(ur.a)(b,1e3),O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:br,t=e.id,n=e.term,r=e.synonyms,a=e.definition,c=t?hr:Or;c===Or?j(mr):c===hr&&f(n),o({dialogType:c,id:t,term:n,synonym:"",synonyms:r,definition:a,errors:{}})},h=function(){o(fr)},m=function(e,t){o(Object(x.a)(Object(x.a)({},i),{},{synonyms:t,errors:{}}))},p=function(e,t){o(Object(x.a)(Object(x.a)({},i),{},{synonym:t,errors:{}}))},g=f.isPending(),v=function(){return Object(Fe.jsxs)(Fe.Fragment,{children:[Object(Fe.jsx)(ot.a,{autoFocus:!0,required:!0,fullWidth:!0,margin:"normal",variant:"outlined",error:!!i.errors.term,label:"\u0422\u0435\u0440\u043c\u0438\u043d",helperText:i.errors.term||"\u0412 \u043d\u0430\u0447\u0430\u043b\u044c\u043d\u043e\u0439 \u0444\u043e\u0440\u043c\u0435: \u0435\u0434.\u0447., \u043c.\u0440., \u0418.\u043f., \u0438\u043d\u0444\u0438\u043d\u0438\u0442\u0438\u0432",value:i.term,onChange:function(e){!function(e){var t=e.target.value;t?f(t):(j(mr),f.cancel()),o(Object(x.a)(Object(x.a)({},i),{},{term:t,errors:{}}))}(e)}}),Object(Fe.jsx)(lr.a,{multiple:!0,value:i.synonyms,onChange:m,inputValue:i.synonym,onInputChange:p,options:i.synonym?d.find((function(e){return e===i.synonym}))?d:[i.synonym].concat(Object(ce.a)(d)):d,getOptionLabel:function(e){return e},filterSelectedOptions:!0,renderInput:function(e){return Object(Fe.jsx)(ot.a,Object(x.a)(Object(x.a)({},e),{},{fullWidth:!0,margin:"normal",variant:"outlined",label:"\u0421\u0438\u043d\u043e\u043d\u0438\u043c\u044b",InputProps:Object(x.a)(Object(x.a)({},e.InputProps),{},{endAdornment:Object(Fe.jsxs)(Fe.Fragment,{children:[g?Object(Fe.jsx)(or.a,{color:"primary",size:20}):null,e.InputProps.endAdornment]})})}))}}),Object(Fe.jsx)(ot.a,{required:!0,multiline:!0,fullWidth:!0,margin:"normal",variant:"outlined",error:!!i.errors.definition,label:"\u041e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0438\u0435",value:i.definition,helperText:i.errors.definition,onChange:function(e){!function(e){o(Object(x.a)(Object(x.a)({},i),{},{definition:e.target.value,errors:{}}))}(e)}})]})};return Object(Fe.jsxs)(Fe.Fragment,{children:[Object(Fe.jsx)(Nt,{isOpened:i.dialogType===Or,title:"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0442\u0435\u0440\u043c\u0438\u043d\u0430",onAdd:function(){var e,n=t((e={term:i.term,synonyms:i.synonyms,definition:i.definition},function(t){var n=We(e);if(n)return{errors:n};t({type:w,payload:Ne(e)}),t(Te("success",'\u0422\u0435\u0440\u043c\u0438\u043d "'.concat(e.term,'" \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d')))}));return!(null===n||void 0===n?void 0:n.errors)||(o(Object(x.a)(Object(x.a)({},i),{},{errors:n.errors})),!1)},onClose:h,children:v()}),Object(Fe.jsx)(dr,{isOpened:i.dialogType===hr,title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0442\u0435\u0440\u043c\u0438\u043d\u0430",onUpdate:function(){var e,n=t((e={id:i.id,term:i.term,synonyms:i.synonyms,definition:i.definition},function(t){var n=We(e);if(n)return{errors:n};t({type:C,payload:Ce(e)}),t(Te("success",'\u0422\u0435\u0440\u043c\u0438\u043d "'.concat(e.term,'" \u0438\u0437\u043c\u0435\u043d\u0435\u043d')))}));return!(null===n||void 0===n?void 0:n.errors)||(o(Object(x.a)(Object(x.a)({},i),{},{errors:n.errors})),!1)},onClose:h,children:v()}),Object(Fe.jsxs)(sr.a,{className:e.container,children:[Object(Fe.jsx)(sr.a,{className:e.header,children:Object(Fe.jsx)(Ge.a,{size:"small",variant:"outlined",color:"primary",startIcon:Object(Fe.jsx)(bt.a,{}),onClick:function(){O()},children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0442\u0435\u0440\u043c\u0438\u043d"})}),Object(Fe.jsx)(sr.a,{className:e.cards,children:n.map((function(e){return Object(Fe.jsx)(In,{term:e,showMenu:!0,onTermDialogOpen:O},e.id)}))})]})]})},xr=function(){return Object(Fe.jsxs)(Fe.Fragment,{children:[Object(Fe.jsx)(ir,{}),Object(Fe.jsx)(pr,{})]})},gr=n(127),vr=n.n(gr),yr=function(){var e=Object(a.useState)(!1),t=Object(E.a)(e,2),n=t[0],r=t[1],c=Object(a.useRef)(null);return{canvasRef:c,isZoomed:n,drawImage:function(e){c.current.width=e.width,c.current.height=e.height,c.current.getContext("2d").drawImage(e,0,0)},onToggleCanvasZoom:function(){r(!n)}}},kr=function(e){var t=kt();return Object(Fe.jsx)(wt,{header:{title:"\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u044b \u043c\u043e\u043d\u0438\u0442\u043e\u0440\u0438\u043d\u0433\u0430",backRoute:X},children:Object(Fe.jsx)("div",{className:t.drawerItem,children:Object(Fe.jsx)(Be.a,{className:t.info,severity:"info",children:"\u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0439 \u0444\u0443\u043d\u043a\u0446\u0438\u043e\u043d\u0430\u043b \u0432 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0435."})})})},wr=Object(Xe.a)((function(e){return{canvasContainer:{flex:1,overflow:"auto"}}})),Nr=function(){var e=Object(u.b)(),t=Object(R.h)().monitoringRecordId,n=wr(),r=yr(),c=r.canvasRef,i=r.isZoomed,o=r.drawImage,s=r.onToggleCanvasZoom,l=Object(a.useState)(null),d=Object(E.a)(l,2),j=d[0],b=d[1],O=Object(a.useState)(null),h=Object(E.a)(O,2),m=h[0],p=h[1];Object(a.useEffect)((function(){if(!j){var n,r,a=(n=t,de(le.MONITORING).find((function(e){return e.id===n})));a&&e((r=a.layout,function(e){e({type:f,payload:r})})),b(a)}}),[e,j,t]);Object(a.useEffect)((function(){return function(){e((function(e){e(Ee(!0))}))}}),[]);if(Object(a.useEffect)((function(){j&&!m&&setTimeout((function(){vr()(document.querySelector("#contentWidth"),{backgroundColor:null}).then((function(e){o(e),p(!0)}))}),1e3)}),[o,m,j]),!j)return void 0===j?Object(Fe.jsx)(R.a,{to:X}):null;return Object(Fe.jsxs)(Fe.Fragment,{children:[Object(Fe.jsx)(kr,{}),Object(Fe.jsxs)(sr.a,{className:n.canvasContainer,style:m?{}:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[!m&&Object(Fe.jsx)(or.a,{}),Object(Fe.jsx)("canvas",{ref:c,width:0,height:0,style:{maxWidth:i?"none":"100%",cursor:i?"zoom-out":"zoom-in"},onClick:s})]}),Object(Fe.jsx)("div",{style:{width:0},children:!m&&Object(Fe.jsx)(Xn,{scenario:{blocks:j.blocks},modes:["monitoring-record"],cascade:!0,containerWidth:j.containerWidth,getTextPartClass:function(e){var t=j.monitoringData[e];return t?t.isRecognized?"recognized":"unrecognized":"unread"}})})]})},Cr=(n(193),function(){return Object(Fe.jsx)("div",{className:"admin",children:Object(Fe.jsxs)(R.d,{children:[Object(Fe.jsx)(R.b,{exact:!0,path:X,children:Object(Fe.jsx)(St,{})}),Object(Fe.jsx)(R.b,{exact:!0,path:Q,children:Object(Fe.jsx)(Qn,{})}),Object(Fe.jsx)(R.b,{exact:!0,path:[$,te],children:Object(Fe.jsx)(cr,{})}),Object(Fe.jsx)(R.b,{exact:!0,path:re,children:Object(Fe.jsx)(xr,{})}),Object(Fe.jsx)(R.b,{exact:!0,path:ae,children:Object(Fe.jsx)(Nr,{})})]})})}),Ir=n(282),Sr=Object(Xe.a)((function(e){return{root:{padding:e.spacing(2)},scenario:{padding:e.spacing(2),lineHeight:1}}})),Tr=function(){var e=Object(u.c)((function(e){return e.scenarios})),t=Sr();return Object(Fe.jsxs)(R.d,{children:[Object(Fe.jsx)(R.b,{exact:!0,path:V,children:Object(Fe.jsx)(Xn,{modes:[H],autoScroll:!0,cascade:!0})}),Object(Fe.jsx)(R.b,{children:Object(Fe.jsx)(Ir.a,{className:t.root,container:!0,justify:"center",alignItems:"center",children:Object(Fe.jsx)(Ir.a,{item:!0,container:!0,xs:12,spacing:2,justify:"center",style:{maxWidth:1280},children:e.map((function(e){return Object(Fe.jsx)(Ir.a,{item:!0,xs:4,children:Object(Fe.jsx)(Ge.a,{className:t.scenario,variant:"outlined",component:s.b,to:(n=e.id,V.replace(Y,n)),fullWidth:!0,children:e.title})},e.id);var n}))})})})]})},Er=n(128),Rr=n(283),Ar=Object(Er.a)({palette:{primary:{main:Rr.a[500]},background:{default:Rr.a[50]}},zIndex:{snackbar:1299}}),zr=(n(194),function(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e.layout})),n=Object(u.c)((function(e){return e.scenarios})),r=Object(a.useState)({width:0,height:0}),c=Object(E.a)(r,2),i=c[0],o=c[1];Object(a.useEffect)((function(){window.onresize=function(){var e=document.querySelector("#contentWidth"),t=document.querySelector("#contentHeight");if(e&&t){var n=e.getBoundingClientRect().width,r=t.getBoundingClientRect().height;n===i.width&&r===i.height||o({width:n,height:r})}},window.onresize()}),[i,t]);Object(a.useEffect)((function(){return function(){window.onresize=null}}),[]);Object(a.useEffect)((function(){e(Ee())}),[e]);Object(a.useEffect)((function(){e((function(e,t){t().scenarios||e({type:O,payload:me()})}))}),[e]);if(Object(a.useEffect)((function(){e((function(e,t){t().thesaurus||e({type:k,payload:ke()})}))}),[e]),!t||!n)return null;var s="".concat(Math.floor(t.fontSize*M),"px"),l="".concat(Math.floor(s*M),"px");return Object(Fe.jsxs)(z.a,{theme:Object(x.a)(Object(x.a)({},Ar),{},{layout:Object(x.a)(Object(x.a)({},t),{},{titleFontSize:s,titleLineHeight:l,getWidth:function(e){if(!e)return"auto";var n=function(e){return t.grid.columnGutter*(e-1)},r=n(t.grid.columnsNumber),a=(i.width-r)/t.grid.columnsNumber,c=n(e);return"".concat(a*e+c,"px")},getTop:function(){return 0===i.height?"0px":"".concat(Math.round(t.focusLine*i.height/100),"px")}})}),children:[Object(Fe.jsx)(A.a,{}),Object(Fe.jsx)(De,{}),Object(Fe.jsxs)("div",{className:"App",children:[Object(Fe.jsx)(tt,{}),Object(Fe.jsxs)(R.d,{children:[Object(Fe.jsx)(R.b,{path:X,children:Object(Fe.jsx)(Cr,{})}),Object(Fe.jsx)(R.b,{path:["/",Z],children:Object(Fe.jsx)(Tr,{})})]})]})]})}),Wr=Object(l.e)(T,Object(l.d)(Object(l.a)(d.a)));o.a.render(Object(Fe.jsx)(u.a,{store:Wr,children:Object(Fe.jsx)(s.a,{basename:"/",children:Object(Fe.jsx)(zr,{})})}),document.getElementById("root"))}},[[195,1,2]]]);
//# sourceMappingURL=main.afed0515.chunk.js.map